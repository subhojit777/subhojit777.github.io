---
layout: post
title: Create Read Update Delete data table in Drupal
date: '2013-07-10T14:27:00.000+05:30'
author: Subhojit Paul
tags:
- drupal
- '7'
modified_time: '2013-11-19T10:37:43.293+05:30'
thumbnail: http://2.bp.blogspot.com/-wSEcwPOv088/Ud0EHX0uAlI/AAAAAAAAAnE/aJnJ_EhlSGQ/s72-c/Selection_005.png
blogger_id: tag:blogger.com,1999:blog-6340784984471653280.post-2535985540819512472
blogger_orig_url: http://subhojitpaul.blogspot.com/2013/07/crud-data-table-in-drupal.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">This blog post is about how you can create, read, update and delete entries from data table in Drupal. Data table can be used to create custom database tables. This <a href="https://drupal.org/project/data" rel="nofollow" target="_blank">module</a> allows you to create custom database tables and an API for create, read, update and delete(CRUD).<br /><br /><h4 style="text-align: left;">Why you need a data table?</h4><div style="text-align: left;">I will explain you my use case. I was working on a project where I had to store college information. This "college information" was huge. I was thinking of creating content types and storing those information as nodes. But a node invokes many hooks. My requirement was to just store these information, which will hardly be changed once in five years. Also I did not needed any node properties like author uid, created time, changed time, etc. So it was mostly static. Therefore, I decided to use data table.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">Now you may ask why not create a database table directly in the database instead of using an "extra" module?</div><div style="text-align: left;">The thing is, data table also provides views integration. I mean you can create a view for a data table, instead of writing queries. This module also has a good API. Great module I should say :)</div><div style="text-align: left;"><br /></div><div style="text-align: left;">So in brief, you can use data table to store static information for a web site and view the information without writing queries.</div><div style="text-align: left;"><br /></div><h4 style="text-align: left;">CRUD for data table</h4><div style="text-align: left;">Create a new data table from admin &gt;&gt; structure &gt;&gt; data tables &gt;&gt; create new table. Add fields to it. You have to create a primary key in that data table, otherwise you will not be able to create a view for that data table.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">I have created a data table called college_application as an example. Here is the structure of the data table. Views was not required for this data table, so there is no primary key. Otherwise you have to create a primary key.</div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-wSEcwPOv088/Ud0EHX0uAlI/AAAAAAAAAnE/aJnJ_EhlSGQ/s1600/Selection_005.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-wSEcwPOv088/Ud0EHX0uAlI/AAAAAAAAAnE/aJnJ_EhlSGQ/s1600/Selection_005.png" height="96" width="400" /></a></div><div style="text-align: left;"><br /></div><h4 style="text-align: left;">Create new entry</h4><pre class="brush:php">$table = data_get_table('college_application');<br />$save_data = array(<br /><br />  'student_id' =&gt; SOME_DATA,<br /><br />  'college_id' =&gt; SOME_DATA,<br /><br />  'application' =&gt; SOME_DATA,<br /><br />  'assigner' =&gt; SOME_DATA,<br />);<br />$table-&gt;handler()-&gt;save($save_data);<br /></pre><div style="text-align: left;"><br /></div><div style="text-align: left;">This will create new entry with given data. </div><div style="text-align: left;"><br /></div><h4 style="text-align: left;">Read entry</h4><pre class="brush:php">$table = data_get_table('college_application');<br />$output = $table-&gt;handler()-&gt;load(array(<br />  'student_id' =&gt; SOME_DATA,<br />  'college_id' =&gt; SOME_DATA,<br />));<br /></pre><div style="text-align: left;">This will fetch all entries where student_id and college_id is equal to the given data.<br />Suppose you want to add an OR condition for values in <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">college_id</span><span style="font-family: inherit;">:</span><br /><pre class="brush:php">$table = data_get_table('college_application');<br />$output = $table-&gt;handler()-&gt;load(array(<br />  'student_id' =&gt; SOME_DATA,<br />  'college_id' =&gt; array(SOME_DATA1, SOME_DATA2),<br />));</pre></div><div style="text-align: left;">This will fetch all rows where <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">college_id</span> is either SOME_DATA1 or SOME_DATA2 and <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">student_id</span> is SOME_DATA</div><div style="text-align: left;"><br /></div><h4 style="text-align: left;">Update entry</h4><pre class="brush:php">$table = data_get_table('college_application');<br />$update_data = array(<br />  'student_id' =&gt; SOME_DATA,<br />  'college_id' =&gt; SOME_DATA,<br />  'application' =&gt; SOME_DATA,<br />  'assigner' =&gt; SOME_DATA,<br />);<br />$table-&gt;handler()-&gt;update($update_data, array('student_id', 'college_id'));<br /></pre><div style="text-align: left;"><br /></div><div style="text-align: left;">This will update all entries where student_id and college_id equals to the given data.</div><div style="text-align: left;"><br /></div><h4 style="text-align: left;">Delete entry</h4><pre class="brush:php">$table = data_get_table('college_application');<br />$delete_data = array(<br />  'student_id' =&gt; SOME_DATA,<br />  'college_id' =&gt; SOME_DATA,<br />);<br />$table-&gt;handler()-&gt;delete($delete_data);<br /></pre><div style="text-align: left;"><br /></div><div style="text-align: left;">This will delete all entries where student_id and college_id equals to the the given data.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">That's all.. I hope everything is clear to you.</div></div>