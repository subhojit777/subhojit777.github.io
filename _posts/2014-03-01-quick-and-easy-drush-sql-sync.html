---
layout: post
title: Quick and easy Drush sql sync
date: '2014-03-01T13:30:00.000+05:30'
author: Subhojit Paul
tags:
- bash
- drush
- drupal
modified_time: '2014-03-05T10:41:24.718+05:30'
blogger_id: tag:blogger.com,1999:blog-6340784984471653280.post-1855959870169667219
blogger_orig_url: http://subhojitpaul.blogspot.com/2014/03/quick-and-easy-drush-sql-sync.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">Drush provides an excellent tool <a href="http://drush.ws/#sql-sync" rel="nofollow" target="_blank">sql-sync</a> to sync database between two machines. I needed this tool to synchronize my local database with production database. Simple use of <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">drush sql-sync</span> <span style="font-family: inherit;">was slow, I used it with some options and it was easy and quick. I am going to show you how I did it.</span><br /><br /><span style="font-family: inherit;">You need to create Drush alias for your Drupal site. Create aliases for local and production setup. If you don't know how to create Drush alias, you can learn it from <a href="http://ryankois.com/blog/2012/09/03/drush-site-aliases-are-awesome/" rel="nofollow" target="_blank">here</a></span>. I will use an option for sql-sync that can only be used through Drush alias setup.<br /><br />Here is a sample Drush alias setup: (mysite.aliases.drushrc.php) <br /><br /><pre class="brush:php">&lt;?php<br /><br />$aliases['local'] = array (<br />&nbsp; 'root' =&gt; '/var/www/mysite',<br />&nbsp; 'uri' =&gt; 'http://mysite.local',<br />&nbsp; 'path-aliases' =&gt;<br />&nbsp; array (<br />&nbsp;&nbsp;&nbsp; '%drush' =&gt; '/usr/share/drush',<br />&nbsp;&nbsp;&nbsp; '%site' =&gt; 'sites/default/',<br />&nbsp;&nbsp;&nbsp; '%files' =&gt; 'sites/default/files/'<br />&nbsp; ),<br />);<br />$aliases['live'] = array (<br />&nbsp; 'root' =&gt; '/var/www/mysite',<br />&nbsp; 'uri' =&gt; 'http://mysite.com',<br />&nbsp; 'path-aliases' =&gt;<br />&nbsp; array (<br />&nbsp;&nbsp;&nbsp; '%drush' =&gt; '/usr/share/drush',<br />&nbsp;&nbsp;&nbsp; '%site' =&gt; 'sites/default/',<br />&nbsp;&nbsp;&nbsp; '%files' =&gt; 'sites/default/files/'<br />&nbsp; ),<br />&nbsp; 'remote-user' =&gt; 'some-user',<br />&nbsp; 'remote-host' =&gt; 'xx.xxx.xxx.xx',<br />&nbsp; 'source-command-specific' =&gt; array(<br />&nbsp;&nbsp;&nbsp; 'sql-sync' =&gt; array(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'create-db',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'no-cache',<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 'skip-tables-key' =&gt; array('*cache*'),<br />&nbsp;&nbsp;&nbsp; ),<br />&nbsp; ),<br />);<br /><br /></pre><br />If you see the <b>live</b> part of the alias code, I have used <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">source-command-specific<span style="font-family: inherit;">, it means if I use live as source any Drush specified inside it will be executed, in our case it is <span style="font-family: &quot;Courier New&quot;,Courier,monospace;">sql-sync</span>.</span></span><br /><br />The options I have used:<br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">create-db</span> - Means create new database. Default is, import will be merged with current database.<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">no-cache</span> - Do not cache sql-dump<br /><br /><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">skip-tables-key</span> - Do not import cache tables, as they will be created dynamically. Comma separated multiple keys can also be provided. It can only be used through alias file.<br /><br />After this alias setup execute drush sql-sync:<br /><pre class="brush:bash">drush -v sql-sync @mysite.live @mysite.local<br /></pre></div>